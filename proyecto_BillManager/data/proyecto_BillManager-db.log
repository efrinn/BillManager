/*C4*/SET SCHEMA PUBLIC
DISCONNECT
/*C5*/SET SCHEMA PUBLIC
drop table if exists IMAGES CASCADE 
drop table if exists Meta CASCADE 
drop table if exists OXDISCUSSIONCOMMENTS CASCADE 
drop table if exists Presupuesto CASCADE 
drop table if exists Transaccion CASCADE 
create table IMAGES (ID varchar(32) not null, GALLERY varchar(32), image varbinary(16777216), primary key (ID))
create table Meta (oid varchar(255) not null, estado varchar(255), fechaLimite date, foto blob(255), montoAcumulado numeric(19,2) not null check (montoAcumulado>=0), montoObjetivo numeric(19,2) not null, nombre varchar(60) not null, primary key (oid))
create table OXDISCUSSIONCOMMENTS (id varchar(32) not null, comment clob(16777216), discussionId varchar(32), time timestamp, userName varchar(30), primary key (id))
create table Presupuesto (oid varchar(255) not null, anio integer, monto_limite numeric(19,2), notas varchar(100), periodo varchar(15), primary key (oid))
create table Transaccion (oid varchar(255) not null, comprobante varchar(32), descripcion varchar(250), fechaTransaccion date, monto numeric(19,2) check (monto>=0), nombre varchar(60) not null, id_presupuesto varchar(255) not null, primary key (oid))
create index IDXbhlx4vunn24ym1tbrlgq8g30m on OXDISCUSSIONCOMMENTS (discussionId)
alter table Transaccion add constraint FKsoevmwsgl2wpul5erh87higg6 foreign key (id_presupuesto) references Presupuesto
INSERT INTO PRESUPUESTO VALUES('652aa759-2987-427e-b976-9cc56becf324',2025,10000.00,'Mis ahorros','DECEMBER')
COMMIT
INSERT INTO TRANSACCION VALUES('92bf95ce-fecb-4d47-9cc8-a799b9c9428e',NULL,'No se broder','2025-11-26',100.00,'Hola','652aa759-2987-427e-b976-9cc56becf324')
COMMIT
INSERT INTO META VALUES('37fa34ec-2be5-46c5-94b9-12427cb6284f','PROGRESANDO','2025-11-30',NULL,1.00,1000.00,'JESUS IS KING')
COMMIT
